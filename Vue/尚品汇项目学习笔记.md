原始访问 http://gmall-h5-api.atguigu.cn

# 初始化

## 安装vue cli

如果没有安装 Vue CLI 就先安装

```bash
npm install -g @vue/cli
```

## 创建一个项目

windows下使用bash不能交互式选择，用cmd就行

```bash
>vue create app


Vue CLI v5.0.6
? Please pick a preset: Default ([Vue 2] babel, eslint)
? Pick the package manager to use when installing dependencies: NPM


Vue CLI v5.0.6
✨  Creating project in E:\pogject\vueProject\shangpinghui\app.
🗃  Initializing git repository...
⚙️  Installing CLI plugins. This might take a while...


added 848 packages in 41s
🚀  Invoking generators...
📦  Installing additional dependencies...


added 83 packages in 6s
⚓  Running completion hooks...

📄  Generating README.md...

🎉  Successfully created project app.
👉  Get started with the following commands:

 $ cd app
 $ npm run serve

```

## 目录文件描述

```bash
$ ls
README.md        jsconfig.json  package-lock.json  public/  vue.config.js
babel.config.js  node_modules/  package.json       src/
```

脚手架目录:public + assets文件夹区别

1. node_modules:放置项目依赖的地方

2. public:一般放置一些共用的静态资源，打包上线的时候，public文件夹里面资源原封不动打包到dist文件夹里面

3. src：程序员源代码文件夹

   -  -----assets文件夹：经常放置一些静态资源（图片），assets文件夹里面资源webpack会进行打包为一个模块（js文件夹里面）

   -  -----components文件夹:一般放置非路由组件（或者项目共用的组件）

4. ​    App.vue 唯一的根组件

5. ​    main.js 入口文件【程序最先执行的文件】

6. ​    babel.config.js:babel配置文件

7. ​    package.json：看到项目描述、项目依赖、项目运行指令

8. ​    README.md:项目说明文件







## 配置项目package.json

浏览器自动打开

​    在package.json文件中

```json
  "scripts": {
    "serve": "vue-cli-service serve --open",
    "build": "vue-cli-service build",
    "lint": "vue-cli-service lint"
  }
```

关闭eslint校验工具

创建vue.config.js文件：需要对外暴露

```js
const { defineConfig } = require('@vue/cli-service')
module.exports = defineConfig({
  transpileDependencies: true,
  lintOnSave:false
})
```

 src文件夹的别名的设置

因为项目大的时候src（源代码文件夹）：里面目录会很多，找文件不方便，设置src文件夹的别名的好处，找文件会方便一些

创建jsconfig.json文件

```json
{
  "compilerOptions": {
    "target": "es5",
    "module": "esnext",
    "baseUrl": "./",
    "moduleResolution": "node",
    "paths": {
      "@/*": [
        "src/*"
      ]
    },
    "exclude":[
      "node_modules",
      "dist"
    ],
    "lib": [
      "esnext",
      "dom",
      "dom.iterable",
      "scripthost"
    ]
  }
}
```

## 配置git

```bash
echo "# vue-app-sph" >> README.md
git init
git add README.md
git commit -m "first commit"
git branch -M main
git remote add origin git@github.com:senbinkop66/vue-app-sph.git
git push -u origin main
```

## 安装less less-loader@5

```bash
cnpm i --save less less-loader@5
```

切记less-loader安装5版本的，不要安装在最新版本，安装最新版本less-loader会报错，报的错误setOption函数未定义

需要在style标签的身上加上lang="less",不添加样式不生效

```vue
<style scoped lang="less">
</style>
```

## 安装vue-router

```
cnpm i --save vue-router
```



## 路由的配置

### vue-router

路由分为KV

node平台（并非语言）

对于后台而言:K即为URL地址  V即为相应的中间件

```
http://localhost:8080/0607

app.get("/0607",(res,req)=>{

  res.send('我是祖国的老花骨朵');

});

```

前端路由:

K即为URL（网络资源定位符）

V即为相应的路由组件

### 路由的一个分析

确定项目结构顺序:上中下 -----只有中间部分的V在发生变化，中间部分应该使用的是路由组件

2个非路由组件|四个路由组件

两个非路由组件：Header 、Footer

路由组件:Home、Search、Login（没有底部的Footer组件，带有二维码的）、Register（没有底部的Footer组件，带二维码的）



### 安装路由

```bash
cnpm i --save vue-router@3
```

--save:可以让你安装的依赖，在package.json文件当中进行记录

这里安装vue-router@4会编译时会报错



## 创建路由组件

【一般放在views|pages文件夹】

配置路由

配置完四个路由组件



## 创建非路由组件

（2个：Header、Footer）



非路由组件使用分为几步:

第一步：定义

第二步：引入

第三步：注册

第四步:使用



清除默认样式

```html
    <!-- 引入reset.css清除默认样式 -->
    <link rel="stylesheet" type="text/css" href="<%= BASE_URL %>reset.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_2758111_9hehey1sgko.css">
```



非路由组件的结构的搭建：

静态页面：

结构 + 样式 +图片资源



项目采用的less样式,浏览器不识别less语法，需要一些loader进行处理，把less语法转换为CSS语法



```
面试题：v-show与v-if区别?
v-show:通过样式display控制
v-if：通过元素上树与下树进行操作

面试题:开发项目的时候，优化手段有哪些?
1:v-show|v-if
2:按需加载
8)首页|搜索底部是有Footer组件，而登录注册是没有Footer组件
Footer组件显示|隐藏，选择v-show|v-if
路由元信息
```



## 路由的跳转

路由的跳转就两种形式：声明式导航（router-link：务必要有to属性）

​          编程式导航push||replace

编程式导航更好用：因为可以书写自己的业务逻辑



9）路由传参

params参数：路由需要占位，程序就崩了，属于URL当中一部分

query参数：路由不需要占位，写法类似于ajax当中query参数

```vue
	<div>
		<h1>Search</h1>
		<h2>params---{{$route.params.keyword}}</h2>
		<h2>query---{{$route.query.keyword}}</h2>
	</div>
```



```js
// 第一种：字符串
 this.$router.push("/search/" + this.keyword + "?k=" + this.keyword.toUpperCase());
// 第二种：模板字符串
 this.$router.push(`/search/${this.keyword}?k=${this.keyword.toUpperCase()}`);
// 第三种：对象
this.$router.push({name: "search", params:{keyword: "abc" || undefined}, query:{keyword:this.keyword}});
```





路由传递参数先关面试题
     1:路由传递参数（对象写法）path是否可以结合params参数一起使用?
     不可以：不能这样书写，程序会崩掉

​      2:如何指定params参数可传可不传? 
 如果路由要求传递路由参数，但是你就不传参数，URL会出现问题
 如何指定params参数可以传递、或者不传递，在配置路由的时候，在占位后面加一个问号

```js
 {
    //命名路由,给路由起一个名字
    name: "search",
    path: "/search:keyword?",
    component: Search,
    meta: { show: true },
}    
```

 3:params参数可以传递也可以不传递，但是如果传递是空串，如何解决？

 使用undefined解决：params参数可以传递、不传递（空的字符串）

```js
this.$router.push({name: "search", params:{keyword: "abc" || undefined}, query:{keyword:this.keyword}});
```

  4:如果指定name与params配置, 但params中数据是一个"", 无法跳转，路径会出问题




 5: 路由组件能不能传递props数据?

```js
 //新增配置项:props,给路由组件传递props参数
        //第一种布尔模式,相当于把params参数，作为props属性值传递给这个路由组件
        // props:true,

        //第二种:对象形式
        // props:{a:1,b:'kkk'}

        //第三种写法:函数写法.一般是把query参数与params参数当中props传递给路由组件!!!
        //route就是当前路由
        // props:(route)=>{
        //      //是将当前箭头函数返回结果，作为props传递给search路由组件!!!
        //      return {a:route.params.keyword,b:'可以传递参数'};
        // }

```

```

```



编程式导航路由跳转到当前路由(参数不变), 多次执行会抛出NavigationDuplicated的警告错误?

注意:编程式导航（push|replace）才会有这种情况的异常，声明式导航是没有这种问题，因为声明式导航内部已经解决这种问题。
这种异常，对于程序没有任何影响的。

为什么会出现这种现象:
由于vue-router最新版本3.5.2，引入了promise，当传递参数多次且重复，会抛出异常，因此出现上面现象,

第一种解决方案：是给push函数，传入相应的成功的回调与失败的回调

```js
// 验证Vue-Router引入Promise技术,最笨的方法,给push传递第二个、第三个参数【回调函数】
// 下面这种写法：治标不治本！！！！
let reuslt = this.$router.push({name: "search", params:{keyword: "abc" || undefined}, query:{keyword:this.keyword}}, (data)=>{console.log(data)}, (err)=>{console.error(err)});
console.log(reuslt);
```

第一种解决方案可以暂时解决当前问题，但是以后再用push|replace还是会出现类似现象，因此我们需要从‘根’治病；



```js
//问题1:push方法,里面this是谁? vueRouter类的实例
//this: 当前组件实例
this.$router.push({name:'search',params:{keyword:this.keyword}});
//问题2:push方法里面的this是谁?windows
let result = this.$router.push;
result({name:'search',params:{keyword:this.keyword}})
```



## 将Home组件的静态组件拆分



静态页面（样式）

拆分静态组件

发请求获取服务器数据进行展示

开发动态业务

拆分组件：结构+样式+图片资源

一共要拆分为七个组件

```

```

