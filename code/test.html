<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8>
        <title>test</title>
        <script src="https://unpkg.com/vue@3.2.31"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    </head>
<style type="text/css">
.demo {
  font-family: sans-serif;
  border: 1px solid #eee;
  border-radius: 2px;
  padding: 20px 30px;
  margin-top: 1em;
  margin-bottom: 40px;
  user-select: none;
  overflow-x: auto;
}

.tab-button {
  padding: 6px 10px;
  border-top-left-radius: 3px;
  border-top-right-radius: 3px;
  border: 1px solid #ccc;
  cursor: pointer;
  background: #f0f0f0;
  margin-bottom: -1px;
  margin-right: -1px;
}
.tab-button:hover {
  background: #e034e0;
}
.tab-button.active {
  background: #02e0e0;
}
.demo-tab {
  border: 1px solid #ccc;
  padding: 10px;
}
</style>
    <body>
<div id="demo">
  <button id="replay">播放录像</button>
</div>

<script type="text/javascript">
var Ryu = {
  attack: function(){
    console.log( '攻击' );
  },
  defense: function(){
    console.log( '防御' );
  },
  jump: function(){
    console.log( '跳跃' );
  },
  crouch: function(){
    console.log( '蹲下' );
  }
};
var makeCommand = function( receiver, state ){ // 创建命令
  return  receiver[ state ];
};
var commands = {
  "119": "jump", // W
  "115": "crouch", // S
  "97": "defense", // A
  "100": "attack" // D
};

var commandStack = []; // 保存命令的堆栈
document.onkeypress = function( ev ){
  var keyCode = ev.keyCode,
  command = makeCommand( Ryu, commands[ keyCode ] );
  if ( command ){
    command(); // 执行命令
    commandStack.push( command ); // 将刚刚执行过的命令保存进堆栈
  }
};
document.getElementById( 'replay' ).onclick = function(){ // 点击播放录像
  var command;
  while( command = commandStack.shift() ){ // 从堆栈里依次取出命令并执行
    command();
  }
};


</script>

    </body>
</html>