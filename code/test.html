<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8>
        <title>test</title>
        <script src="https://unpkg.com/vue@3.2.31"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    </head>
<style type="text/css">
body {
  margin: 30px;
}

</style>

<body>


<script type="text/javascript">
  var Light=function(){
    this.currState=FSM.off;  //设置当前状态
    this.button=null;
  };
  Light.prototype.init=function(){
    var button=document.createElement("button");
    var self=this;
    button.innerHTML="已关灯";
    this.button=document.body.appendChild(button);
    this.button.onclick=function(){
      self.currState.buttonWasPressed.call(self);  // 把请求委托给 FSM 状态机
    }
  };

  var FSM={
    off:{
      buttonWasPressed:function(){
        console.log("关灯");
        this.button.innerHTML = '下一次按我是开灯';
        this.currState = FSM.on;
      }
    },
    on:{
      buttonWasPressed:function(){
        console.log( '开灯' );
        this.button.innerHTML = '下一次按我是关灯';
        this.currState = FSM.off;
      }
    }
  };

  var light=new Light();
  light.init();

</script>

    </body>
</html>