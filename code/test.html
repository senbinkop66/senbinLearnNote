<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8>
        <title>test</title>
        <script src="https://unpkg.com/vue@3.2.31"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <!-- 引入 echarts.js -->
        <script src="https://cdn.staticfile.org/echarts/5.3.2/echarts.min.js"></script>
        <script src="./jquery-3.6.0.js"></script>

    </head>
<style type="text/css">
body {
  margin: 30px;
}
#main{
  height: 800px;
}

</style>

<body>
<button id="btn">Make a promise!</button>
<div id="log"></div>

<script type="text/javascript">
  "use strict";
  var promiseCount=0;
  function testPromise(){
    let thisPromiseCount=++promiseCount;
    let log=document.getElementById("log");
    log.insertAdjacentHTML("beforeend",thisPromiseCount+") 开始 (<small>同步代码开始</small>)<br/>");
    let p1=new Promise((resolve,reject)=>{
      log.insertAdjacentHTML("beforeend",thisPromiseCount+") Promise 开始 (<small>异步代码开始</small>)<br/>");
      window.setTimeout(function(){
        resolve(thisPromiseCount);
      },Math.random()*2000+1000);
    });

    p1.then(function(val){
      log.insertAdjacentHTML("beforeend",val+") Promise 已填充完毕 (<small>异步代码结束</small>)<br/>");
    }).catch((reason)=>{
      console.log("处理失败的 promise ("+reason+")");
    });

    log.insertAdjacentHTML("beforeend",thisPromiseCount+") Promise made (<small>同步代码结束</small><br/>");
  }

  if ("Promise" in window) {
    let btn=document.getElementById("btn");
    btn.addEventListener("click",testPromise);
  }else{
    log=document.getElementById("log");
    log.innerHTML="Live example not available as your browser doesn't support the <code>Promise</code> interface.";
  }


</script>

    </body>
</html>